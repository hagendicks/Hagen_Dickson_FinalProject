<!DOCTYPE html>
<html lang="en">
<head>
    <base href="/">
    <meta charset="UTF-8">
    <title>Influencer Dashboard - BrandConnect</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="{{ url_for('static', filename='icon.png') }}" type="image/png">
</head>
<body>
    <header>
        <div class="logo"><h1>BrandConnect</h1></div>
        <button class="menu-toggle" id="menuToggle">&#9776;</button>
        <nav>
            <ul>
                <li><a href="{{ url_for('influencer_dashboard') }}" style="color: #e67e22;">Dashboard</a></li>
                <li><a href="{{ url_for('profile') }}">Profile</a></li>
                <li><a href="{{ url_for('feed') }}">Feed</a></li>
                <li><a href="{{ url_for('search') }}">Search</a></li> 
                <li><a href="{{ url_for('messages_inbox') }}">Messages</a></li> 
            </ul>
        </nav>
        <a href="{{ url_for('logout') }}" class="btn-login">Logout</a>
    </header>

    <div class="dashboard-content">
        <h2 id="welcome-msg">ðŸ‘‹ Welcome back, {{ name }}!</h2>
        <p class="subtitle">Your overview of active campaigns and profile performance.</p>

        <div class="cards-container stats-container">
            <div class="card">
                <h3>Active Campaigns</h3>
                <p style="font-size: 2.5rem; color: #f1c40f; margin-top: 10px;">{{ active_count }}</p>
                <p>Campaigns currently in progress.</p>
            </div>
            <div class="card">
                <h3>Pending Applications</h3>
                <p style="font-size: 2.5rem; color: #2ecc71; margin-top: 10px;">{{ applications|selectattr("Status", "equalto", "Pending")|list|length }}</p>
                <p>Awaiting brand review.</p>
            </div>
        </div>

        {% if recommendations %}
        <h3 style="margin-top: 40px; border-bottom: 2px solid #2ecc71; padding-bottom: 10px; display: inline-block;">ðŸŽ¯ Recommended for You</h3>
        <p style="color: #bdc3c7; margin-bottom: 20px;">Based on your industry.</p>
        
        <div style="display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 40px;">
            {% for rec in recommendations %}
            <div class="card" style="flex: 1; min-width: 250px; background: #2c3e50; border: 1px solid #4a6781;">
                <h4 style="color: #f1c40f;">{{ rec.Brandname }}</h4>
                <p style="font-weight: bold; margin-bottom: 10px;">{{ rec.CampaignName }}</p>
                <p style="font-size: 0.9rem; color: #bdc3c7;">Budget: GHS {{ rec.PayPackage }}</p>
                <p style="font-size: 0.9rem; color: #bdc3c7; margin-bottom: 15px;">Ends: {{ rec.EndDate }}</p>
                
                <form action="{{ url_for('apply_campaign', campaign_id=rec.CampaignID) }}" method="POST">
                    <button type="submit" class="btn-login" style="width: 100%; padding: 8px; font-size: 0.9rem;">Apply Now</button>
                </form>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <h3>Recent Application Status</h3>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Brand</th>
                    <th>Campaign Type</th>
                    <th>Date Applied</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for app in applications %}
                <tr>
                    <td>{{ app.Brandname }}</td>
                    <td>{{ app.CampaignType }}</td>
                    <td>{{ app.DateApplied }}</td>
                    <td class="status-{{ app.Status|lower }}">{{ app.Status }}</td>
                </tr>
                {% else %}
                <tr><td colspan="4">No recent applications found.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <script src="/script.js"></script>
</body>
</html>
